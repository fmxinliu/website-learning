<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>数组方法</title>
	<!-- https://zh.javascript.info/array-methods -->
	<!-- sort，reverse 和 splice 方法修改数组本身 -->
</head>
<body>
	<script>
		function print(msg) {
			document.write(msg);
			document.write("<br />");
		}

		// delete 数组元素，但占用的位置并没有被释放
		let arr = ["I", "go", "home"];

		delete arr[1]; // remove "go"
		print( arr[1] ); // undefined
		// now arr = ["I",  , "home"];
		print( arr.length ); // 3


		// 语法：arr.splice(index[, deleteCount, elem1, ..., elemN])
		arr = ["I", "study", "JavaScript", "right", "now"];
		// (1) 删除
		let removed = arr.splice(3);
		print(removed); // ==============================================

		// (2) 插入
		arr.splice(2, 0, "complex", "language");
		print(arr); // ==============================================

		// (3) 替换
		arr.splice(-1, 1, "C++"); // -1:反向索引，表示数组末元素
		print(arr); // ==============================================

		// 语法：arr.slice(start, end)
		let str = "test";
		    arr = ["t", "e", "s", "t"];

		print( str.slice(1, 3) ); // es
		print( arr.slice(1, 3) ); // e,s

		print( str.slice(-2) ); // st
		print( arr.slice(-2) ); // s,t

		// 语法：arr.indexOf(item, from) 和 arr.includes(item, from)   【使用 === 精确比较】
		arr = [NaN];
		print(arr.indexOf(NaN)); // -1 !!!!!!!!!!
		print(arr.includes(NaN)); // true

		// 语法：find 查找第一个匹配元素，filter 查找所有匹配元素
		let users = [
		  {id: 1, name: "John"},
		  {id: 2, name: "Pete"},
		  {id: 3, name: "Mary"}
		];

		let user = users.find(item => item.id < 3);
		print(user.name); // John


		let someUsers = users.filter(item => item.id < 3);
		print(someUsers.length);

		// 语法：map(func) 从每个元素调用 func 的结果创建一个新数组
		let lengths = ["Bilbo", "Gandalf", "Nazgul"].map(item => item.length)
		print(lengths); // 5,7,6

		// 语法：sort(func) 默认情况下按字符串排序
		arr = [1, 2, 15];
		print( arr.sort() ); // 1,15,2
		print( arr ); // ==============================================
		print( arr.sort((a, b) => a - b ));
		print( [1, 11, 22].sort(function(a, b) {
			return b - a;
		}));

		// 语法：reverse
		arr.reverse();
		print(arr); // ==============================================

		// 语法：split
		let letters = "test".split(''); // 字符串 -> 字母 !!!!!!
		print( letters ); // t,e,s,t

		// 语法：join
		str = ["h", "e", "l", "l", "o"].join(''); // 字母 -> 字符串 !!!!!!
		print( str ); // 

		// 语法：reduce(func, initial) — 通过为每个元素调用 func 计算数组上的单个值并在调用之间传递中间结果。
		print(`sum = ${[1, 2, 3].reduce((sum, current) => sum + current, 0)}`);

		// 语法：forEach(func) — 为每个元素调用 func，不返回任何东西
		[1, 2, 3].forEach(print);
		["1", "2", "3"].forEach((item, index, array) => {
			print(`'${item}' is at index ${index} in "${array}"`);
		});

		// 语法：Array.isArray(arr) 检查 arr 是否是一个数组
		print( typeof {} ); // object
		print( typeof [] ); // object 数组基于对象，typeof 无法从对象中区分出数组来
		print( Array.isArray({}) ); // false
		print( Array.isArray([]) ); // true
		
	</script>
</body>
</html>